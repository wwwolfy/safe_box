(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t,e,s){t.exports=s(46)},22:function(t,e,s){},42:function(t,e,s){},43:function(t,e,s){},44:function(t,e,s){},45:function(t,e,s){},46:function(t,e,s){"use strict";s.r(e);var a=s(0),n=s.n(a),r=s(14),o=s.n(r),i=(s(22),s(2)),u=s(3),c=s(5),l=s(4),m=s(6),d=s(15),p=s.n(d),g=(s(42),function(t){var e=t.value,s=t.onPasswordInput,a=t.change;return n.a.createElement("button",{onClick:function(){s(e),a()},className:"keyboard__button"},e)}),S=(s(43),function(t){var e=t.onPasswordInput,s=t.change,a=[7,8,9,4,5,6,1,2,3,"*",0,"L"].map(function(t){return n.a.createElement(g,{key:t,change:s,onPasswordInput:e,value:t})});return n.a.createElement("ul",{className:"keyboard"},a)}),h=(s(44),function(t){function e(){return Object(i.a)(this,e),Object(c.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.password,s=t.background,a=t.doorStatus,r=t.mainStatus;return n.a.createElement("div",{className:"screen",style:{background:s}},n.a.createElement("p",{className:"screen__door-values"},a),n.a.createElement("p",{className:"screen__password"},e),n.a.createElement("p",{className:"screen__main-status"},r))}}]),e}(a.Component)),f=(s(45),function(t){function e(){var t,s;Object(i.a)(this,e);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(s=Object(c.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(n)))).state={url:"https://9w4qucosgf.execute-api.eu-central-1.amazonaws.com/default/CR-JS_team_M02a?",serialNumber:"4815162342",serviceModeInput:"000000",passLength:6,idleTime:1200,brightScreenTime:5e3,lockingUnlockingTime:3e3,errorRecoveryTime:2e3,statusEnum:{locking:"Locking...",locked:"Locked",unlocking:"Unlocking...",ready:"Ready",validating:"Validating...",error:"Error",service:"Service",empty:""},doorEnum:{locked:"Locked",unlocked:"Unlocked"},screenEnum:{lightScreen:"#7fffff",darkScreen:"#47b2b2"},password:"",doorState:"Unlocked",timer:null,finalPassword:"",mainStatus:"",screenLight:"#47b2b2",screenLightTimer:null,response:""},s.handleKeyboardInput=function(t){s.backLightChange();var e="l"===t.key?"L":t.key;/^([0-9]|L|\*)/.test(e)?s.onPasswordInput(e):console.log("Press right key")},s.serverValidation=function(t){p.a.get("".concat(s.state.url).concat(t)).then(function(t){return s.setState({response:t.data.sn},function(){s.state.response===s.state.serialNumber?s.setUnlockingStatus():s.setErrorStatus()})}).catch(function(t){console.log(t),s.setErrorStatus()})},s.backLightChange=function(){clearTimeout(s.state.screenLightTimer),s.setState({screenLight:s.state.screenEnum.lightScreen,screenLightTimer:setTimeout(function(){s.state.mainStatus!==s.state.statusEnum.service&&s.setState({screenLight:s.state.screenEnum.darkScreen,mainStatus:s.state.statusEnum.empty})},s.state.brightScreenTime)})},s.locking=function(t){if(s.state.finalPassword.length===s.state.passLength)"L"===t?s.setLockingStatus():(s.setErrorStatus(),s.setState({finalPassword:""}));else{""!==s.state.password&&clearTimeout(s.state.timer);var e=s.state.password+t;s.setState({password:e,timer:setTimeout(function(){s.state.finalPassword.length!==s.state.passLength&&s.resetInit()},s.state.idleTime)},function(){s.state.password.length===s.state.passLength?"*"===t||"L"===t||s.state.password===s.state.serviceModeInput?s.setErrorStatus():s.setState({finalPassword:s.state.password}):s.state.password.length>s.state.passLength?"L"!==t&&s.setErrorStatus():"*"!==t&&"L"!==t||s.setErrorStatus()})}},s.unlocking=function(t){if(s.state.mainStatus===s.state.statusEnum.service){clearTimeout(s.state.timer);var e=s.state.password+t;s.setState({password:e,timer:setTimeout(function(){s.setState({mainStatus:s.state.statusEnum.validating}),s.serverValidation(s.state.password),s.resetInit()},s.state.idleTime)})}else{""!==s.state.password&&clearTimeout(s.state.timer);var a=s.state.password+t;s.setState({password:a,timer:setTimeout(function(){s.resetInit()},s.state.idleTime)},function(){s.state.password.length===s.state.passLength?s.state.password===s.state.finalPassword?s.setUnlockingStatus():s.state.password===s.state.serviceModeInput?s.setState({mainStatus:s.state.statusEnum.service,password:""}):s.setErrorStatus():s.state.password.length<s.state.passLength&&("*"!==t&&"L"!==t||s.setErrorStatus())})}},s.onPasswordInput=function(t){s.state.mainStatus!==s.state.statusEnum.service&&s.setState({mainStatus:s.state.statusEnum.ready}),s.state.mainStatus!==s.state.statusEnum.ready&&""!==s.state.mainStatus||s.state.doorState!==s.state.doorEnum.unlocked?s.state.mainStatus!==s.state.statusEnum.ready&&s.state.mainStatus!==s.state.statusEnum.service&&""!==s.state.mainStatus||s.state.doorState!==s.state.statusEnum.locked||s.unlocking(t):s.locking(t)},s.resetInit=function(){s.setState({password:"",timer:null})},s.setErrorStatus=function(){s.setState({mainStatus:s.state.statusEnum.error,password:""}),setTimeout(function(){s.setState({mainStatus:s.state.statusEnum.ready})},s.state.errorRecoveryTime)},s.setUnlockingStatus=function(){s.setState({mainStatus:s.state.statusEnum.unlocking}),setTimeout(function(){s.setState({mainStatus:s.state.statusEnum.ready,doorState:s.state.doorEnum.unlocked,password:"",finalPassword:""})},s.state.lockingUnlockingTime)},s.setLockingStatus=function(){s.setState({mainStatus:s.state.statusEnum.locking}),setTimeout(function(){s.setState({mainStatus:s.state.statusEnum.ready,doorState:s.state.doorEnum.locked,password:""})},s.state.lockingUnlockingTime)},s}return Object(m.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){document.addEventListener("keypress",this.handleKeyboardInput)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keypress",this.handleKeyboardInput)}},{key:"render",value:function(){return n.a.createElement("div",{className:"safe-box"},n.a.createElement(h,{doorStatus:this.state.doorState,mainStatus:this.state.mainStatus,background:this.state.screenLight,password:this.state.password}),n.a.createElement(S,{change:this.backLightChange,onPasswordInput:this.onPasswordInput}),n.a.createElement("p",{className:"safe-box__sn"},"S/N: ",this.state.serialNumber))}}]),e}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.01f0a9d2.chunk.js.map